@inherits LayoutComponentBase
@inject LandingService LandingService
<CascadingValue Value="@_pageInfo">
    <NavMenu/>
    @if (!_isLoaded)
    {
        <MudProgressCircular Size="Size.Large" Indeterminate />
    }
    else
    {
        @Body   
    }
</CascadingValue>

@code {
    [UsedImplicitly]
    private PageInfo _pageInfo = new() { HeaderText = @<span>@LandingService.ServiceName</span> };
    private bool _isLoaded;
    
    protected override async Task OnInitializedAsync()
    {
        try
        {
            await LandingService.Refresh();
        }
        finally
        {
            _isLoaded = true;
        }
    }
}